import{a as _,b as O,c as P,j as s,s as C,r as a,d as A,g as b,e as B,f as R,h as k,I as w,i as p}from"./index-107bfde3.js";function S(e=_){const t=e===_?O:P(e);return function(){const{store:n}=t();return n}}const z=S();function $(e=_){const t=e===_?z:S(e);return function(){return t().dispatch}}const V=$(),F=({top:e,left:t,height:r,width:n,onBackDropClick:o,children:l})=>s.jsx("div",{className:C.backDrop,onClick:o,children:s.jsx("div",{style:{top:e,left:t,height:r,width:n},className:C.container,onClick:u=>u.stopPropagation(),children:l})}),G="_container_1lnf3_1",U="_input_1lnf3_4",H="_error_1lnf3_11",j={container:G,input:U,error:H},M=(e,t=300)=>{const[r,n]=a.useState(e);return a.useEffect(()=>{const o=setTimeout(()=>{n(e)},t);return()=>{clearTimeout(o)}},[e,t]),r},y=()=>V(),E=A,q="_container_1ts4g_1",J="_fullName_1ts4g_13",K="_info_1ts4g_18",x={container:q,fullName:J,info:K},Q=({name:e,country:t,state:r,lat:n,lon:o})=>{const l=y(),u=()=>{l(b({lat:n,lon:o}))};return s.jsxs("div",{onClick:u,className:x.container,children:[s.jsxs("div",{className:x.fullName,children:[e,", ",r,", ",t]}),s.jsxs("div",{className:x.info,children:["lat: ",n," lon:",o]})]})},X=()=>{const e=y(),{cityCoordinates:t}=E(d=>({cityCoordinates:d.cityCoordinates})),r=a.useRef(null),[n,o]=a.useState(""),[l,u]=a.useState(!1),f=M(n),[c,g]=a.useState(!1);return a.useEffect(()=>{e(f?B({cityName:f}):R.actions.reset())},[f]),a.useEffect(()=>{l&&n&&g(!0)},[l,n]),s.jsxs("div",{children:[s.jsx("input",{ref:r,onFocus:()=>u(!0),onBlur:()=>u(!1),className:j.input,placeholder:"City",name:"city",type:"text",value:n,onChange:d=>o(d.target.value)}),c&&r.current&&k.createPortal(s.jsx(F,{top:r.current.offsetTop+r.current.offsetHeight,left:r.current.offsetLeft,height:"auto",width:r.current.offsetWidth,onBackDropClick:()=>g(!1),children:t.error?s.jsx("div",{className:j.error,children:t.error}):t.isLoading?s.jsx("div",{style:{height:200},children:s.jsx(w,{type:"fullBlock"})}):t.cityCoordinates.map(d=>s.jsx(Q,{...d},d.name+d.lat))}),document.body)]})};var T={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},v=p.createContext&&p.createContext(T),h=globalThis&&globalThis.__assign||function(){return h=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},h.apply(this,arguments)},Y=globalThis&&globalThis.__rest||function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]]);return r};function L(e){return e&&e.map(function(t,r){return p.createElement(t.tag,h({key:r},t.attr),L(t.child))})}function Z(e){return function(t){return p.createElement(ee,h({attr:h({},e.attr)},t),L(e.child))}}function ee(e){var t=function(r){var n=e.attr,o=e.size,l=e.title,u=Y(e,["attr","size","title"]),f=o||r.size||"1em",c;return r.className&&(c=r.className),e.className&&(c=(c?c+" ":"")+e.className),p.createElement("svg",h({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},r.attr,n,u,{className:c,style:h(h({color:e.color||r.color},r.style),e.style),height:f,width:f,xmlns:"http://www.w3.org/2000/svg"}),l&&p.createElement("title",null,l),e.children)};return v!==void 0?p.createElement(v.Consumer,null,function(r){return t(r)}):t(T)}function te(e){return Z({tag:"svg",attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M924.8 625.7l-65.5-56c3.1-19 4.7-38.4 4.7-57.8s-1.6-38.8-4.7-57.8l65.5-56a32.03 32.03 0 0 0 9.3-35.2l-.9-2.6a443.74 443.74 0 0 0-79.7-137.9l-1.8-2.1a32.12 32.12 0 0 0-35.1-9.5l-81.3 28.9c-30-24.6-63.5-44-99.7-57.6l-15.7-85a32.05 32.05 0 0 0-25.8-25.7l-2.7-.5c-52.1-9.4-106.9-9.4-159 0l-2.7.5a32.05 32.05 0 0 0-25.8 25.7l-15.8 85.4a351.86 351.86 0 0 0-99 57.4l-81.9-29.1a32 32 0 0 0-35.1 9.5l-1.8 2.1a446.02 446.02 0 0 0-79.7 137.9l-.9 2.6c-4.5 12.5-.8 26.5 9.3 35.2l66.3 56.6c-3.1 18.8-4.6 38-4.6 57.1 0 19.2 1.5 38.4 4.6 57.1L99 625.5a32.03 32.03 0 0 0-9.3 35.2l.9 2.6c18.1 50.4 44.9 96.9 79.7 137.9l1.8 2.1a32.12 32.12 0 0 0 35.1 9.5l81.9-29.1c29.8 24.5 63.1 43.9 99 57.4l15.8 85.4a32.05 32.05 0 0 0 25.8 25.7l2.7.5a449.4 449.4 0 0 0 159 0l2.7-.5a32.05 32.05 0 0 0 25.8-25.7l15.7-85a350 350 0 0 0 99.7-57.6l81.3 28.9a32 32 0 0 0 35.1-9.5l1.8-2.1c34.8-41.1 61.6-87.5 79.7-137.9l.9-2.6c4.5-12.3.8-26.3-9.3-35zM788.3 465.9c2.5 15.1 3.8 30.6 3.8 46.1s-1.3 31-3.8 46.1l-6.6 40.1 74.7 63.9a370.03 370.03 0 0 1-42.6 73.6L721 702.8l-31.4 25.8c-23.9 19.6-50.5 35-79.3 45.8l-38.1 14.3-17.9 97a377.5 377.5 0 0 1-85 0l-17.9-97.2-37.8-14.5c-28.5-10.8-55-26.2-78.7-45.7l-31.4-25.9-93.4 33.2c-17-22.9-31.2-47.6-42.6-73.6l75.5-64.5-6.5-40c-2.4-14.9-3.7-30.3-3.7-45.5 0-15.3 1.2-30.6 3.7-45.5l6.5-40-75.5-64.5c11.3-26.1 25.6-50.7 42.6-73.6l93.4 33.2 31.4-25.9c23.7-19.5 50.2-34.9 78.7-45.7l37.9-14.3 17.9-97.2c28.1-3.2 56.8-3.2 85 0l17.9 97 38.1 14.3c28.7 10.8 55.4 26.2 79.3 45.8l31.4 25.8 92.8-32.9c17 22.9 31.2 47.6 42.6 73.6L781.8 426l6.5 39.9zM512 326c-97.2 0-176 78.8-176 176s78.8 176 176 176 176-78.8 176-176-78.8-176-176-176zm79.2 255.2A111.6 111.6 0 0 1 512 614c-29.9 0-58-11.7-79.2-32.8A111.6 111.6 0 0 1 400 502c0-29.9 11.7-58 32.8-79.2C454 401.6 482.1 390 512 390c29.9 0 58 11.6 79.2 32.8A111.6 111.6 0 0 1 624 502c0 29.9-11.7 58-32.8 79.2z"}}]})(e)}const re="_container_ldoly_1",ne="_error_ldoly_15",se="_location_ldoly_19",oe="_tempAndIconContainer_ldoly_24",ae="_tempContainer_ldoly_29",ce="_icon_ldoly_35",ie="_temp_ldoly_24",le="_feelsLike_ldoly_44",ue="_description_ldoly_49",de="_settingsBtn_ldoly_54",me="_temperatureUnit_ldoly_65",i={container:re,error:ne,location:se,tempAndIconContainer:oe,tempContainer:ae,icon:ce,temp:ie,feelsLike:le,description:ue,settingsBtn:de,temperatureUnit:me},fe=e=>` https://openweathermap.org/img/wn/${e}@2x.png`;class he{format(t){return t}}class pe{format(t){return t*9/5+32}}const ge=e=>{const[t,r]=a.useState(e);return{setTemperatureFormatter:r,formatTemperature:o=>t.format(o)}},N=new he,_e=new pe,xe={C:"Celsius",F:"Fahrenheit"},ye=()=>{const e=y(),{weather:t}=E(m=>({weather:m.currentWeather})),r=ge(N),n=a.useRef(null),[o,l]=a.useState(!1),[u,f]=a.useState(null),[c,g]=a.useState("C");a.useEffect(()=>{u&&e(b(u))},[u]),a.useEffect(()=>{c==="C"&&r.setTemperatureFormatter(N),c==="F"&&r.setTemperatureFormatter(_e)},[c]);const d=m=>{const{latitude:I,longitude:D}=m.coords;f({lat:I,lon:D})},W=m=>{console.error("Geolocation error:",m)};return a.useEffect(()=>{navigator.geolocation&&navigator.geolocation.getCurrentPosition(d,W)},[]),t.isLoading||!t.currentWeather?s.jsx("div",{className:i.container,style:{flexGrow:1},children:s.jsx(w,{type:"fullBlock"})}):t.error?s.jsx("div",{className:i.container,children:s.jsx("div",{className:i.error,children:t.error})}):s.jsxs("div",{className:i.container,children:[s.jsx("button",{ref:n,onClick:()=>l(!0),className:i.settingsBtn,children:s.jsx(te,{})}),o&&n.current&&k.createPortal(s.jsx(F,{top:n.current.offsetTop-80,left:n.current.offsetLeft-80,height:"auto",width:120,onBackDropClick:()=>l(!1),children:["C","F"].map(m=>s.jsx("button",{className:i.temperatureUnit,onClick:()=>g(m),children:xe[m]},m))}),document.body),s.jsxs("div",{className:i.location,children:["Loacation : ",t.currentWeather.name,"/",t.currentWeather.sys.country]}),s.jsxs("div",{className:i.tempAndIconContainer,children:[s.jsx("div",{className:["ibg",i.icon].join(" "),children:s.jsx("img",{src:fe(t.currentWeather.weather[0].icon??""),alt:"icon"})}),s.jsxs("div",{className:i.tempContainer,children:[s.jsxs("div",{className:i.temp,children:[r.formatTemperature(t.currentWeather.main.temp??0).toFixed(0)," ",c,"°"]}),s.jsxs("div",{className:i.feelsLike,children:["Feels"," ",r.formatTemperature(t.currentWeather.main.feels_like??0).toFixed(0)," ",c,"°"]})]})]}),s.jsx("div",{className:i.description,children:t.currentWeather.weather[0].description})]})},Ce=()=>s.jsxs("div",{style:{display:"flex",flexDirection:"column",flexGrow:1,alignSelf:"stretch",gap:"2rem",padding:"1.5rem 0"},children:[s.jsx(X,{}),s.jsx(ye,{})]}),ve=Ce;export{ve as CurrentWeatherPage};
